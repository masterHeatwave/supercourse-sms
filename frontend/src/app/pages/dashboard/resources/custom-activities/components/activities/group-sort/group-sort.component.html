<div cdkDropList [cdkDropListData]="groups" (cdkDropListDropped)="dropGroup($event)" class="group-list">
  <div *ngFor="let group of groups; let groupIndex = index" cdkDrag class="group">
    <div style="display: flex; align-items: center">
      <div style="display: flex; align-items: center">
        <i class="pi pi-ellipsis-v" cdkDragHandle style="cursor: grab"></i
        ><input
          class="group-name"
          [(ngModel)]="groups[groupIndex].groupName"
          (input)="onGroupNameChange($event, groupIndex)"
          [placeholder]="'customActivities.group_name' | translate"
          style="padding-bottom: 1px; margin: 0"
        />
      </div>
      <app-image-selector
        (onErrorMessage)="handleErrorMessage($event)"
        (onImageURLChanged)="handleImageURLChanged($event, groupIndex)"
        [imageURL]="group.imageURL"
        style="padding-top: 2px"
      ></app-image-selector>
      <i class="pi pi-trash" style="font-size: 1.5rem; margin-left: 10px; padding-bottom: 2px" (click)="removeGroup(groupIndex)"></i>
    </div>
    <div cdkDropList [cdkDropListData]="group.items" (cdkDropListDropped)="dropQuestion($event, groupIndex)" class="question-list">
      <div *ngFor="let item of group.items; let itemIndex = index" cdkDrag class="question">
        <label cdkDragHandle style="cursor: grab; padding-left: 0px; padding-right: 0px"
          ><span style="margin-top: -10px !important; margin-left: -10px !important"><i class="pi pi-ellipsis-v"></i></span
          >{{ itemIndex + 1 }}.</label
        >
        <group-sort-answer
          [answerText]="item.answer.answerText"
          [imageURL]="item.answer.imageURL"
          [answerNumber]="item.answer.answerNumber"
          [TTSText]="item.answer.TTSText"
          (deleteClicked)="handleDeleteClicked(groupIndex, itemIndex)"
          (imageURLChanged)="handleImageURLChange($event, groupIndex, itemIndex)"
          (inputChanged)="handleInputChange($event, groupIndex, itemIndex)"
          (TTSTextChanged)="handleTTSTextChange($event, groupIndex, itemIndex)"
        ></group-sort-answer>
      </div>
    </div>
    <span class="add-item-span" (click)="addQuestion(groupIndex)">+{{ 'customActivities.add_item' | translate }}</span>
  </div>
</div>
<span class="add-group-span" (click)="addGroup()">+{{ 'customActivities.add_group' | translate }}</span>
<app-warning-dialog [warningMessage]="warningMessage" [isDialogVisible]="isWarningDialogVisible" (onClose)="isWarningDialogVisible = false" />
