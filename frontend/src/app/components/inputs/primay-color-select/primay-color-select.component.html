<div class="color-select {{ styleClass }} w-full">
  <label *ngIf="label" class="block mb-2">
    {{ label | translate }} 
    <span *ngIf="required" class="text-red-500">*</span>
  </label>

  <div class="color-picker-wrapper" [class.color-picker-invalid]="invalid">
    <div class="custom-color-preview-wrapper">
      <div class="custom-color-preview" (click)="colorInput.click()">
        <div 
          class="color-circle" 
          [ngStyle]="{ 'background-color': selectedColor }"
          [title]="selectedColor"
        ></div>
        <span class="color-value">{{ selectedColor }}</span>
      </div>
      
      <!-- Native color input as fallback -->
      <input 
        #colorInput
        type="color"
        [value]="selectedColor"
        (input)="onNativeColorChange($event)"
        [disabled]="disabled || formControl.disabled"
        class="hidden-color-input"
      />
      
      <!-- Keep PrimeNG picker as alternative -->
      <p-colorpicker
        #picker
        [ngModel]="pickerValue"
        (ngModelChange)="onPickerChange($event)"
        [disabled]="disabled || formControl.disabled"
        [style]="{ position: 'absolute', opacity: 0, pointerEvents: 'none', width: '1px', height: '1px' }"
      ></p-colorpicker>
    </div>
  </div>
</div>